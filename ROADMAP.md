# ROADMAP - 漢字書き順ジェネレーター

## 進行中

- [ ] 書き順エディタ v2（点配置方式）の改良
  - [x] 点配置 + Catmull-Rom スプライン曲線
  - [x] 点のドラッグ移動（指オフセット40px）
  - [x] 中心スナップ（Zhang-Suen細線化、ON/OFF切替、全漢字対応）
  - [x] 中心線の点線表示
  - [x] スナッププレビュー（クロスヘアカーソル）
  - [x] 透明点マーカー（中抜き円+中心ドット+番号左上）
  - [x] タッチ操作（1本指=配置、2本指=スクロール＆ズーム）
  - [ ] 確定済みストロークの再編集
  - [ ] はね・はらいの終端表現（可変太さストローク等）

## 未着手

### エディタ機能拡張
- [ ] ストローク属性（とめ・はね・はらい）の定義と入力UI
- [ ] はらい・はねのアニメーション表現（終端を細くする等）
- [ ] エディタにプレビュー機能（描いたらその場でアニメーション確認）

### データ量産
- [ ] 漢字データをJSONで外出し管理
- [ ] GLYPH_DATA に漢字を追加（extract_points.py で抽出）
- [ ] 小1配当漢字80字のデータ作成

### 機能拡張
- [ ] 複数漢字の切り替えUI（文字入力 or リスト選択）
- [ ] アニメーション速度調整スライダー
- [ ] 書き順の番号表示（各画に番号を重ねる）
- [ ] centerLines → index.html アニメーションへの自動変換

### データ・インフラ
- [ ] KanjiVGをフォールバックデータとして組み込む（CC BY-SA 3.0 表記つき）

### 将来
- [ ] 宿題レスキューへの組み込み
- [ ] 単体アプリとしてのリリース整備

## 完了

- [x] アニメーションエンジン（CSS transition + stroke-dashoffset）
- [x] Noto Serif JP フォントオーバーレイ（精度比較ツール）
- [x] UI基本実装（スタート / リセット / 参照ON-OFF / 色分けトグル）
- [x] Cloudflare Pages デプロイ（https://kanji-stroke-a8h.pages.dev）
- [x] 書き順エディタ v1（editor.html）- フリーハンド描画 + Douglas-Peucker + JSON出力
- [x] エディタ→アニメーションのパイプライン動作確認
- [x] Klee One SemiBold フォント導入（抽出・表示統一）
- [x] extract_points.py のCSS座標変換対応
- [x] エディタ調整モード v1（線選択 + ドラッグ + スナップ）
- [x] 「九」グリフデータ抽出・追加
- [x] エディタ v2: 点配置方式 + Catmull-Rom スプライン（フリーハンド方式を置換）
- [x] 点のドラッグ移動（指オフセット + 強調表示）
- [x] 中心線スナップ（走査線→Zhang-Suen細線化に進化、全漢字対応）
- [x] スナッププレビュー + プレビュー位置への正確な配置
- [x] 透明点マーカー（中心位置の視認性向上）

## アイデアメモ

- animCJKの実装方式を参考に自前エンジンを磨く
- IPAex明朝のグリフ抽出（fontTools）でアウトライン取得 → 画分割は別途必要
- 「筆順指導の手びき」（パブリックドメイン）を書き順の正解根拠に使う
